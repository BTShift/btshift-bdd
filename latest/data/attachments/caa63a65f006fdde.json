{
  "testName": "API Test Complete",
  "totalCalls": 7,
  "timestamp": "2025-09-12T14:38:05.690Z",
  "calls": [
    {
      "endpoint": "/api/authentication/login",
      "method": "post",
      "request": {
        "headers": {
          "X-Correlation-ID": "3081e11f-0e96-4f7f-b52b-bc0a294ec0b0",
          "X-Test-Context": "{\"featureFile\":\"api-tenantadmin-multiauth.feature\",\"scenario\":\"API Test with TenantAdmin (MultiUserAuth)\",\"currentStep\":\"Test Execution\",\"testIntent\":\"positive\",\"expectedOutcome\":\"2xx_success\",\"testSessionId\":\"test-1757687884245-0omf41qjg\"}"
        },
        "body": {
          "email": "test.tenantadmin@btshift.ma",
          "password": "***MASKED***",
          "tenantId": "aef1fb0d-84fb-412d-97c8-06f7eb7f3846",
          "portalType": "Tenant"
        }
      },
      "response": {
        "status": 200,
        "body": {
          "tokenInfo": "***MASKED***",
          "userInfo": {
            "id": "befc9dc5-3ead-45f1-ad99-bc4c308f595c",
            "email": "test.tenantadmin@btshift.ma",
            "firstName": "Test",
            "lastName": "TenantAdmin",
            "tenantId": "aef1fb0d-84fb-412d-97c8-06f7eb7f3846",
            "roles": [
              "TenantAdmin"
            ],
            "userType": "",
            "clientId": "",
            "departmentId": "",
            "teamId": ""
          },
          "requires2fa": false,
          "sessionToken": "***MASKED***"
        },
        "headers": {}
      },
      "correlationId": "3081e11f-0e96-4f7f-b52b-bc0a294ec0b0",
      "timestamp": {},
      "duration": 460
    },
    {
      "endpoint": "/api/groups",
      "method": "post",
      "request": {
        "headers": {
          "X-Correlation-ID": "8afb8e5f-f49c-433a-9991-327c0156e9a2",
          "X-Test-Context": "{\"featureFile\":\"group-operations.api.feature\",\"scenario\":\"api/features/client-management/groups/happy-path/group-operations.api.spec.ts\",\"currentStep\":\"Test Execution\",\"testIntent\":\"positive\",\"expectedOutcome\":\"2xx_success\",\"testSessionId\":\"test-1757687884744-j65ywt7v0\",\"testCase\":\"should list all groups for a tenant\"}"
        },
        "body": {
          "name": "TestGroup1_1757687884745",
          "description": "First test group",
          "tenantId": "test-tenant-123"
        }
      },
      "response": {
        "status": 200,
        "body": {
          "groupId": "c6a17d17-ae39-43ad-97fa-6b1474330468",
          "name": "TestGroup1_1757687884745",
          "description": "First test group",
          "tenantId": "test-tenant-123",
          "createdAt": "2025-09-12T14:38:04.9670760Z",
          "updatedAt": "2025-09-12T14:38:04.9670762Z",
          "clientCount": 0
        },
        "headers": {}
      },
      "correlationId": "8afb8e5f-f49c-433a-9991-327c0156e9a2",
      "timestamp": {},
      "duration": 291
    },
    {
      "endpoint": "/api/groups",
      "method": "post",
      "request": {
        "headers": {
          "X-Correlation-ID": "318d0235-969e-4153-bbaa-54b0a20763ce",
          "X-Test-Context": "{\"featureFile\":\"group-operations.api.feature\",\"scenario\":\"api/features/client-management/groups/happy-path/group-operations.api.spec.ts\",\"currentStep\":\"Test Execution\",\"testIntent\":\"positive\",\"expectedOutcome\":\"2xx_success\",\"testSessionId\":\"test-1757687884744-j65ywt7v0\",\"testCase\":\"should list all groups for a tenant\"}"
        },
        "body": {
          "name": "TestGroup2_1757687885038",
          "description": "Second test group",
          "tenantId": "test-tenant-123"
        }
      },
      "response": {
        "status": 200,
        "body": {
          "groupId": "29087445-cdb8-4fad-81bd-f1428cfe5b4d",
          "name": "TestGroup2_1757687885038",
          "description": "Second test group",
          "tenantId": "test-tenant-123",
          "createdAt": "2025-09-12T14:38:05.0987774Z",
          "updatedAt": "2025-09-12T14:38:05.0987776Z",
          "clientCount": 0
        },
        "headers": {}
      },
      "correlationId": "318d0235-969e-4153-bbaa-54b0a20763ce",
      "timestamp": {},
      "duration": 117
    },
    {
      "endpoint": "/api/groups",
      "method": "get",
      "request": {
        "headers": {
          "X-Correlation-ID": "71538222-c11a-4467-b151-284091020857",
          "X-Test-Context": "{\"featureFile\":\"group-operations.api.feature\",\"scenario\":\"api/features/client-management/groups/happy-path/group-operations.api.spec.ts\",\"currentStep\":\"Test Execution\",\"testIntent\":\"positive\",\"expectedOutcome\":\"2xx_success\",\"testSessionId\":\"test-1757687884744-j65ywt7v0\",\"testCase\":\"should list all groups for a tenant\"}"
        },
        "params": {
          "query": {
            "tenantId": "test-tenant-123",
            "page": 1,
            "pageSize": 10
          }
        },
        "query": {
          "tenantId": "test-tenant-123",
          "page": 1,
          "pageSize": 10
        }
      },
      "response": {
        "status": 200,
        "body": {
          "groups": [
            {
              "groupId": "0c7c1054-04fb-4787-b273-8f4e94a4f1d6",
              "name": "Basic",
              "description": "Basic clients with essential service packages",
              "clientCount": 0
            },
            {
              "groupId": "b08a313c-e120-47a4-a76a-faa19cfe5d8a",
              "name": "Premium",
              "description": "Premium clients with comprehensive service packages",
              "clientCount": 0
            },
            {
              "groupId": "84dc3bcb-e13e-430a-a625-55e6dca0dfd7",
              "name": "Standard",
              "description": "Standard clients with regular service packages",
              "clientCount": 0
            },
            {
              "groupId": "5bc978dd-d68d-403b-ba57-c32004e39db3",
              "name": "Test Group 1757664389272",
              "description": "Created by typed API test",
              "clientCount": 0
            },
            {
              "groupId": "6f85b24e-40d1-421d-b66a-410390c65eca",
              "name": "Test Group 1757666958346",
              "description": "Created by typed API test",
              "clientCount": 0
            },
            {
              "groupId": "63a440cf-6226-4e3e-a3f0-fa71a95d9989",
              "name": "Test Group 1757667000670",
              "description": "Created by typed API test",
              "clientCount": 0
            },
            {
              "groupId": "b8980302-e76c-4770-875c-5275e5e56da9",
              "name": "Test Group 1757667285669",
              "description": "Created by typed API test",
              "clientCount": 0
            },
            {
              "groupId": "23b48cd3-d1e6-4424-b651-db25815aec98",
              "name": "Test Group 1757672138269",
              "description": "Created by typed API test",
              "clientCount": 2
            },
            {
              "groupId": "e2c374f3-a6dd-477d-aa2d-d76641cd197b",
              "name": "Test Group 1757675699880",
              "description": "Created by typed API test",
              "clientCount": 2
            },
            {
              "groupId": "657a7980-ca9b-402c-bd0d-c1c5fb78672e",
              "name": "Test Group 1757679136999",
              "description": "Created by typed API test",
              "clientCount": 2
            },
            {
              "groupId": "9a1b95a9-bd03-4e47-a5a1-b2eb90b48990",
              "name": "Test Group 1757679985061",
              "description": "Created by typed API test",
              "clientCount": 2
            },
            {
              "groupId": "ad68d729-f232-4581-ba93-466a36e9be59",
              "name": "Test Group 1757680212402",
              "description": "Created by typed API test",
              "clientCount": 2
            },
            {
              "groupId": "176e1682-3cf2-4dfa-8885-f3b961bf96f1",
              "name": "Test Group 1757682643692",
              "description": "Created by typed API test",
              "clientCount": 2
            },
            {
              "groupId": "cbebce5a-a2e2-4d56-9a6b-4e11e1338735",
              "name": "Test Group 1757685601959",
              "description": "Created by typed API test",
              "clientCount": 2
            },
            {
              "groupId": "6d85d13e-a21b-4c9e-8aa0-7626a934151d",
              "name": "Test Group 1757685959517",
              "description": "Created by typed API test",
              "clientCount": 2
            },
            {
              "groupId": "182ce84f-3c7a-4855-8a20-f887666e423c",
              "name": "Test Group 1757687539393",
              "description": "Created by typed API test",
              "clientCount": 2
            },
            {
              "groupId": "228fb6af-0cd0-499d-bdfd-50afe5a868a7",
              "name": "Test Group 1757687877541",
              "description": "Created by typed API test",
              "clientCount": 2
            },
            {
              "groupId": "92db5507-471c-4167-b17b-3c631ea810cc",
              "name": "VIP",
              "description": "VIP clients with priority support and premium services",
              "clientCount": 0
            }
          ],
          "totalCount": 18,
          "page": 1,
          "pageSize": 20
        },
        "headers": {}
      },
      "correlationId": "71538222-c11a-4467-b151-284091020857",
      "timestamp": {},
      "duration": 118
    },
    {
      "endpoint": "/api/groups",
      "method": "post",
      "request": {
        "headers": {
          "X-Correlation-ID": "c1591e01-aaea-42fa-a95b-36846aa52e7e",
          "X-Test-Context": "{\"featureFile\":\"group-operations.api.feature\",\"scenario\":\"api/features/client-management/groups/happy-path/group-operations.api.spec.ts\",\"currentStep\":\"Test Execution\",\"testIntent\":\"positive\",\"expectedOutcome\":\"2xx_success\",\"testSessionId\":\"test-1757687885308-11uwkspit\",\"testCase\":\"should add a client to a group\"}"
        },
        "body": {
          "name": "TestGroup_1757687885309",
          "description": "Group for client association",
          "tenantId": "test-tenant-123"
        }
      },
      "response": {
        "status": 200,
        "body": {
          "groupId": "a15e12aa-017a-4e41-92f6-87535bb5e854",
          "name": "TestGroup_1757687885309",
          "description": "Group for client association",
          "tenantId": "test-tenant-123",
          "createdAt": "2025-09-12T14:38:05.3688136Z",
          "updatedAt": "2025-09-12T14:38:05.3688138Z",
          "clientCount": 0
        },
        "headers": {}
      },
      "correlationId": "c1591e01-aaea-42fa-a95b-36846aa52e7e",
      "timestamp": {},
      "duration": 122
    },
    {
      "endpoint": "/api/clients",
      "method": "post",
      "request": {
        "headers": {
          "X-Correlation-ID": "dcb0bc06-2007-45c1-a65f-56aa6e6d413c",
          "X-Test-Context": "{\"featureFile\":\"group-operations.api.feature\",\"scenario\":\"api/features/client-management/groups/happy-path/group-operations.api.spec.ts\",\"currentStep\":\"Test Execution\",\"testIntent\":\"positive\",\"expectedOutcome\":\"2xx_success\",\"testSessionId\":\"test-1757687885308-11uwkspit\",\"testCase\":\"should add a client to a group\"}"
        },
        "body": {
          "name": "Client 1757687885433-v7yhaugfn-1",
          "email": "client-1757687885433-v7yhaugfn-1@test.com",
          "phone": "+212612345678",
          "address": "456 Business Ave",
          "taxId": "TAX1757687885433-v7yhaugfn-1",
          "industry": "Technology",
          "notes": "Auto-generated test client"
        }
      },
      "response": {
        "status": 200,
        "body": {
          "clientId": "d26c783d-71b7-4703-977c-7dffc859f013",
          "companyName": "",
          "country": "",
          "address": "456 Business Ave",
          "iceNumber": "",
          "rcNumber": "",
          "vatNumber": "",
          "cnssNumber": "",
          "industry": "Technology",
          "adminContactPerson": "",
          "billingContactPerson": "",
          "status": "Active",
          "tenantId": "aef1fb0d-84fb-412d-97c8-06f7eb7f3846",
          "fiscalYearEnd": "",
          "assignedTeamId": "",
          "createdAt": "2025-09-12T14:38:05.4968048Z",
          "updatedAt": "2025-09-12T14:38:05.4968051Z"
        },
        "headers": {}
      },
      "correlationId": "dcb0bc06-2007-45c1-a65f-56aa6e6d413c",
      "timestamp": {},
      "duration": 126
    },
    {
      "endpoint": "/api/groups/a15e12aa-017a-4e41-92f6-87535bb5e854/clients/d26c783d-71b7-4703-977c-7dffc859f013",
      "method": "post",
      "request": {
        "headers": {
          "X-Correlation-ID": "5cc49a4b-eb29-4513-b1a3-c75454614570",
          "X-Test-Context": "{\"featureFile\":\"group-operations.api.feature\",\"scenario\":\"api/features/client-management/groups/happy-path/group-operations.api.spec.ts\",\"currentStep\":\"Test Execution\",\"testIntent\":\"positive\",\"expectedOutcome\":\"2xx_success\",\"testSessionId\":\"test-1757687885308-11uwkspit\",\"testCase\":\"should add a client to a group\"}"
        }
      },
      "response": {
        "status": 200,
        "body": {
          "success": false,
          "message": "Failed to add client to group"
        },
        "headers": {}
      },
      "correlationId": "5cc49a4b-eb29-4513-b1a3-c75454614570",
      "timestamp": {},
      "duration": 114
    }
  ]
}